<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Simple Gantt</title>
	<style>
		body {
			font-family: sans-serif;
			background: #ccc;
		}
		.container {
			width: 80%;
			margin: 0 auto;
		}
		/* custom class */
		.gantt .bar-milestone .bar {
			fill: tomato;
		}

		.gantt .bar-label {
			fill: #333333 !important;
		}

		.bulk_article {
			stroke-width: 1px !important;
			stroke: #333333 !important;
		}
	</style>
	<link rel="stylesheet" href="dist/frappe-gantt.css" />
	<script src="dist/frappe-gantt.js"></script>
</head>
<body>
	<div class="container">
		<h2>Akkumulierte Artikelverfügbarkeit</h2>
		<p>GANTT vom 01.01.2019 bis 31.12.2019</p>
		<p>Ausleihzeitraum vom 01.06.2019 bis 14.06.2019</p>
		<p>Basierend auf deinem eingestellten Zeitraum siehst du hier Zeiträume, in denen alle Artikel auf deiner Technikliste verfügbar sind. Jede Zeile zeigt dir eine Kombination aus Artikeln an die noch verfügbar sind. So kannst du prüfen, ab wann und wie lange deine Artikel-Auswahl verfügbar ist.</p>
		<div class="gantt-target"></div>
	</div>

	<div class="container">
		<h2>Verfügbarkeit Artikel A</h2>
		<p>Von 01.01.2019 bis 31.12.2019</p>
		<div class="gantt-target-a"></div>
	</div>

	<div class="container">
		<h2>Verfügbarkeit Artikel B</h2>
		<p>Von 01.01.2019 bis 31.12.2019</p>
		<div class="gantt-target-b"></div>
	</div>

	<div class="container">
		<h2>Verfügbarkeit Artikel C</h2>
		<p>Von 01.01.2019 bis 31.12.2019</p>
		<div class="gantt-target-c"></div>
	</div>

	<div class="container">
		<h2>Verfügbarkeit Artikel D</h2>
		<p>Von 01.01.2019 bis 31.12.2019</p>
		<div class="gantt-target-d"></div>
	</div>

	<div class="container">
		<h2>Verfügbarkeit Artikel E</h2>
		<p>Von 01.01.2019 bis 31.12.2019</p>
		<div class="gantt-target-e"></div>
	</div>
	<script>/**
	 * Convert reservation periods to availability periods (basically the inversion of the meaning)
	 * @param reservations Array of objects with start and end properties that define the reservation time frame
	 * @param start Start from which availability periods should be generated
	 * @param end End time frame until which availability periods should be generated
	 */
	const YEAR = 'year';
	const MONTH = 'month';
	const DAY = 'day';
	const HOUR = 'hour';
	const MINUTE = 'minute';
	const SECOND = 'second';
	const MILLISECOND = 'millisecond';

		function reservation_to_availability(reservations, start, end) {
			// Sort the reservations
			const result = [];
			const s = [...reservations];
			s.sort(function(a, b) {
				return a['start'] - b['start'];
			});

			let t = start;
			for (let index = 0; index < s.length; index++) {
				// Skip periods that end before the next availability slot
				if (s[index].end < t) {
					continue;
				}
				else if (s[index].start > t) {
					// Calculate the end of the period (one day before the start of the reservation)
					let period_end = new Date(
							s[index].start.getFullYear(),
							s[index].start.getMonth(),
							s[index].start.getDate() - 1,
							s[index].start.getHours(),
							s[index].start.getMinutes(),
							s[index].start.getSeconds(),
							s[index].start.getMilliseconds()
					);

					if (period_end > t) {
						// Max to end
						if (period_end > end) {
							period_end = end;
						}

						// Create an availability period
						result.push({
							start: t,
							end: period_end
						})
					}
				}

				// Calculate the start of the next availability period (one day after the end of the reservation)
				t = new Date(
						s[index].end.getFullYear(),
						s[index].end.getMonth(),
						s[index].end.getDate() + 1,
						s[index].end.getHours(),
						s[index].end.getMinutes(),
						s[index].end.getSeconds(),
						s[index].end.getMilliseconds()
				);

				// Stop if we reached the end
				if (t >= end) {
					break;
				}
			}

			// Create the final period (if required)
			if (t < end) {
				result.push({
					start: t,
					end: end
				})
			}

			return result;
		}

		/**
		 * Check if the given array of periods contains at least one period, that includes or matched
		 * the given start and end parameter
		 * @param periods Array of period objects
		 * @param start Start date of the period to check
		 * @param end End data of the period to check
		 * @return boolean True if a period exists else false
		 */
		function contains_period(periods, start, end) {
			for (let index = 0; index < periods.length; index++) {
				if (periods[index].start <= start && periods[index].end >= end) {
					return true;
				}
			}

			return false;
		}

		/**
		 * Merge the two lists of given periods and keep only those periods that interset
		 * @param a Array of period objects with start and end properties
		 * @param b Array of period objects with start and end properties
		 * @return Array of period objects with start and end properties that intersect - the list maybe empty if there is no intersection
		 */
		function merge_periods(a, b) {
			const result = [];
			a.forEach((period) => {
				let p = {...period};
				let overlap = false;

				b.forEach((compare_period) => {
					// Skip if the periods don't overlap
					if (compare_period.start > p.end || compare_period.end < p.start) {
						return;
					}

					overlap = true;
					if (compare_period.start > p.start) {
						p.start = compare_period.start;
					}

					if (compare_period.end < p.end) {
						p.end = compare_period.end;
					}
				});

				if (overlap && p.start < p.end) {
					result.push(p);
				}
			});

			return result;
		}

		/**
		 * Return a Array of Arrays with availability periods that where at least one unit
		 * is available for all passed articles
		 * @param articles Array with an element that represents an article - an article is represented by a Array of units - A single unit is a Array of a available time periods
		 * @return Array of Arrays with availability periods
		 */
		function merge_article_availability(articles) {
			// Copy the units of the first article to the result - all of tem satisfy
			// the all available condition at first
			let result = [articles[0]];
			for (let i = 1; i < articles.length; i++) {
				const updated_result = [];
				result.forEach(function(existing_periods) {
					articles[i].forEach(function(unit_periods) {
						const combined_periods = merge_periods(unit_periods, existing_periods);
						if (combined_periods.length > 0) {
							updated_result.push(combined_periods);
						}
					});
				});

				result = updated_result;
			}

			return result;
		}


		const articles_data = [[{"name":"Unit 1","reservations":[{"start":"2019-01-16T23:00:00.000Z","end":"2019-01-18T23:00:00.000Z"},{"start":"2019-01-21T23:00:00.000Z","end":"2019-01-30T23:00:00.000Z"},{"start":"2019-02-13T23:00:00.000Z","end":"2019-02-26T23:00:00.000Z"},{"start":"2019-03-01T23:00:00.000Z","end":"2019-03-12T23:00:00.000Z"},{"start":"2019-03-27T23:00:00.000Z","end":"2019-04-01T22:00:00.000Z"},{"start":"2019-04-07T22:00:00.000Z","end":"2019-04-10T22:00:00.000Z"},{"start":"2019-04-11T22:00:00.000Z","end":"2019-04-17T22:00:00.000Z"},{"start":"2019-05-05T22:00:00.000Z","end":"2019-05-08T22:00:00.000Z"},{"start":"2019-05-16T22:00:00.000Z","end":"2019-05-21T22:00:00.000Z"},{"start":"2019-06-10T22:00:00.000Z","end":"2019-06-22T22:00:00.000Z"},{"start":"2019-06-26T22:00:00.000Z","end":"2019-07-04T22:00:00.000Z"},{"start":"2019-07-23T22:00:00.000Z","end":"2019-08-02T22:00:00.000Z"}]},{"name":"Unit 2","reservations":[{"start":"2019-01-02T23:00:00.000Z","end":"2019-01-04T23:00:00.000Z"},{"start":"2019-01-06T23:00:00.000Z","end":"2019-01-18T23:00:00.000Z"},{"start":"2019-01-26T23:00:00.000Z","end":"2019-01-29T23:00:00.000Z"},{"start":"2019-01-30T23:00:00.000Z","end":"2019-02-10T23:00:00.000Z"},{"start":"2019-02-17T23:00:00.000Z","end":"2019-03-01T23:00:00.000Z"},{"start":"2019-03-13T23:00:00.000Z","end":"2019-03-19T23:00:00.000Z"},{"start":"2019-03-20T23:00:00.000Z","end":"2019-03-30T23:00:00.000Z"},{"start":"2019-04-10T22:00:00.000Z","end":"2019-04-12T22:00:00.000Z"},{"start":"2019-04-18T22:00:00.000Z","end":"2019-04-27T22:00:00.000Z"},{"start":"2019-04-28T22:00:00.000Z","end":"2019-05-11T22:00:00.000Z"},{"start":"2019-05-16T22:00:00.000Z","end":"2019-05-23T22:00:00.000Z"},{"start":"2019-05-25T22:00:00.000Z","end":"2019-05-30T22:00:00.000Z"},{"start":"2019-06-01T22:00:00.000Z","end":"2019-06-04T22:00:00.000Z"},{"start":"2019-06-05T22:00:00.000Z","end":"2019-06-10T22:00:00.000Z"},{"start":"2019-06-22T22:00:00.000Z","end":"2019-07-02T22:00:00.000Z"},{"start":"2019-07-08T22:00:00.000Z","end":"2019-07-15T22:00:00.000Z"},{"start":"2019-07-21T22:00:00.000Z","end":"2019-08-03T22:00:00.000Z"},{"start":"2019-08-07T22:00:00.000Z","end":"2019-08-13T22:00:00.000Z"},{"start":"2019-08-20T22:00:00.000Z","end":"2019-08-22T22:00:00.000Z"}]},{"name":"Unit 3","reservations":[{"start":"2019-01-08T23:00:00.000Z","end":"2019-01-13T23:00:00.000Z"},{"start":"2019-01-17T23:00:00.000Z","end":"2019-01-24T23:00:00.000Z"},{"start":"2019-01-28T23:00:00.000Z","end":"2019-02-09T23:00:00.000Z"},{"start":"2019-02-13T23:00:00.000Z","end":"2019-02-16T23:00:00.000Z"},{"start":"2019-02-22T23:00:00.000Z","end":"2019-02-26T23:00:00.000Z"},{"start":"2019-03-07T23:00:00.000Z","end":"2019-03-10T23:00:00.000Z"},{"start":"2019-03-15T23:00:00.000Z","end":"2019-03-25T23:00:00.000Z"},{"start":"2019-04-01T22:00:00.000Z","end":"2019-04-05T22:00:00.000Z"},{"start":"2019-04-13T22:00:00.000Z","end":"2019-04-25T22:00:00.000Z"},{"start":"2019-05-01T22:00:00.000Z","end":"2019-05-12T22:00:00.000Z"},{"start":"2019-05-18T22:00:00.000Z","end":"2019-05-21T22:00:00.000Z"},{"start":"2019-06-02T22:00:00.000Z","end":"2019-06-12T22:00:00.000Z"},{"start":"2019-06-23T22:00:00.000Z","end":"2019-07-01T22:00:00.000Z"},{"start":"2019-07-10T22:00:00.000Z","end":"2019-07-17T22:00:00.000Z"},{"start":"2019-07-19T22:00:00.000Z","end":"2019-07-22T22:00:00.000Z"},{"start":"2019-07-28T22:00:00.000Z","end":"2019-07-29T22:00:00.000Z"},{"start":"2019-08-09T22:00:00.000Z","end":"2019-08-20T22:00:00.000Z"},{"start":"2019-08-30T22:00:00.000Z","end":"2019-09-09T22:00:00.000Z"},{"start":"2019-09-21T22:00:00.000Z","end":"2019-09-24T22:00:00.000Z"},{"start":"2019-10-01T22:00:00.000Z","end":"2019-10-04T22:00:00.000Z"}]},{"name":"Unit 4","reservations":[{"start":"2019-01-10T23:00:00.000Z","end":"2019-01-13T23:00:00.000Z"},{"start":"2019-01-19T23:00:00.000Z","end":"2019-01-29T23:00:00.000Z"},{"start":"2019-02-09T23:00:00.000Z","end":"2019-02-21T23:00:00.000Z"},{"start":"2019-03-01T23:00:00.000Z","end":"2019-03-13T23:00:00.000Z"},{"start":"2019-03-21T23:00:00.000Z","end":"2019-04-02T22:00:00.000Z"},{"start":"2019-04-08T22:00:00.000Z","end":"2019-04-17T22:00:00.000Z"},{"start":"2019-04-29T22:00:00.000Z","end":"2019-05-02T22:00:00.000Z"},{"start":"2019-05-04T22:00:00.000Z","end":"2019-05-09T22:00:00.000Z"},{"start":"2019-05-13T22:00:00.000Z","end":"2019-05-16T22:00:00.000Z"},{"start":"2019-05-19T22:00:00.000Z","end":"2019-06-01T22:00:00.000Z"},{"start":"2019-06-11T22:00:00.000Z","end":"2019-06-20T22:00:00.000Z"},{"start":"2019-06-24T22:00:00.000Z","end":"2019-07-01T22:00:00.000Z"},{"start":"2019-07-10T22:00:00.000Z","end":"2019-07-21T22:00:00.000Z"},{"start":"2019-07-28T22:00:00.000Z","end":"2019-07-31T22:00:00.000Z"},{"start":"2019-08-13T22:00:00.000Z","end":"2019-08-16T22:00:00.000Z"},{"start":"2019-08-18T22:00:00.000Z","end":"2019-08-31T22:00:00.000Z"},{"start":"2019-09-01T22:00:00.000Z","end":"2019-09-04T22:00:00.000Z"},{"start":"2019-09-05T22:00:00.000Z","end":"2019-09-14T22:00:00.000Z"}]},{"name":"Unit 5","reservations":[{"start":"2019-01-17T23:00:00.000Z","end":"2019-01-27T23:00:00.000Z"},{"start":"2019-02-07T23:00:00.000Z","end":"2019-02-09T23:00:00.000Z"},{"start":"2019-02-16T23:00:00.000Z","end":"2019-03-01T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-15T23:00:00.000Z"},{"start":"2019-03-31T22:00:00.000Z","end":"2019-04-08T22:00:00.000Z"},{"start":"2019-04-23T22:00:00.000Z","end":"2019-04-28T22:00:00.000Z"},{"start":"2019-05-02T22:00:00.000Z","end":"2019-05-04T22:00:00.000Z"},{"start":"2019-05-17T22:00:00.000Z","end":"2019-05-27T22:00:00.000Z"},{"start":"2019-06-15T22:00:00.000Z","end":"2019-06-26T22:00:00.000Z"},{"start":"2019-07-11T22:00:00.000Z","end":"2019-07-21T22:00:00.000Z"},{"start":"2019-07-25T22:00:00.000Z","end":"2019-08-02T22:00:00.000Z"},{"start":"2019-08-05T22:00:00.000Z","end":"2019-08-09T22:00:00.000Z"},{"start":"2019-08-25T22:00:00.000Z","end":"2019-08-31T22:00:00.000Z"}]},{"name":"Unit 6","reservations":[{"start":"2019-01-12T23:00:00.000Z","end":"2019-01-18T23:00:00.000Z"},{"start":"2019-01-28T23:00:00.000Z","end":"2019-01-30T23:00:00.000Z"},{"start":"2019-02-14T23:00:00.000Z","end":"2019-02-17T23:00:00.000Z"},{"start":"2019-02-19T23:00:00.000Z","end":"2019-02-21T23:00:00.000Z"},{"start":"2019-02-28T23:00:00.000Z","end":"2019-03-09T23:00:00.000Z"},{"start":"2019-03-22T23:00:00.000Z","end":"2019-03-24T23:00:00.000Z"},{"start":"2019-04-05T22:00:00.000Z","end":"2019-04-17T22:00:00.000Z"},{"start":"2019-04-25T22:00:00.000Z","end":"2019-04-29T22:00:00.000Z"},{"start":"2019-05-03T22:00:00.000Z","end":"2019-05-15T22:00:00.000Z"},{"start":"2019-05-18T22:00:00.000Z","end":"2019-05-31T22:00:00.000Z"},{"start":"2019-06-05T22:00:00.000Z","end":"2019-06-12T22:00:00.000Z"},{"start":"2019-06-15T22:00:00.000Z","end":"2019-06-16T22:00:00.000Z"},{"start":"2019-06-20T22:00:00.000Z","end":"2019-06-26T22:00:00.000Z"},{"start":"2019-07-11T22:00:00.000Z","end":"2019-07-12T22:00:00.000Z"},{"start":"2019-07-23T22:00:00.000Z","end":"2019-07-28T22:00:00.000Z"},{"start":"2019-08-01T22:00:00.000Z","end":"2019-08-14T22:00:00.000Z"}]},{"name":"Unit 7","reservations":[{"start":"2019-01-05T23:00:00.000Z","end":"2019-01-18T23:00:00.000Z"},{"start":"2019-01-21T23:00:00.000Z","end":"2019-01-31T23:00:00.000Z"},{"start":"2019-02-05T23:00:00.000Z","end":"2019-02-06T23:00:00.000Z"},{"start":"2019-02-18T23:00:00.000Z","end":"2019-02-26T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-23T23:00:00.000Z"},{"start":"2019-04-02T22:00:00.000Z","end":"2019-04-08T22:00:00.000Z"},{"start":"2019-04-13T22:00:00.000Z","end":"2019-04-25T22:00:00.000Z"},{"start":"2019-04-26T22:00:00.000Z","end":"2019-05-09T22:00:00.000Z"},{"start":"2019-05-13T22:00:00.000Z","end":"2019-05-22T22:00:00.000Z"},{"start":"2019-05-23T22:00:00.000Z","end":"2019-06-04T22:00:00.000Z"},{"start":"2019-06-18T22:00:00.000Z","end":"2019-06-19T22:00:00.000Z"},{"start":"2019-06-22T22:00:00.000Z","end":"2019-06-25T22:00:00.000Z"},{"start":"2019-06-30T22:00:00.000Z","end":"2019-07-10T22:00:00.000Z"},{"start":"2019-07-18T22:00:00.000Z","end":"2019-07-25T22:00:00.000Z"},{"start":"2019-08-08T22:00:00.000Z","end":"2019-08-18T22:00:00.000Z"},{"start":"2019-08-19T22:00:00.000Z","end":"2019-08-28T22:00:00.000Z"},{"start":"2019-09-04T22:00:00.000Z","end":"2019-09-10T22:00:00.000Z"},{"start":"2019-09-18T22:00:00.000Z","end":"2019-09-28T22:00:00.000Z"}]},{"name":"Unit 8","reservations":[{"start":"2019-01-15T23:00:00.000Z","end":"2019-01-26T23:00:00.000Z"},{"start":"2019-02-01T23:00:00.000Z","end":"2019-02-02T23:00:00.000Z"},{"start":"2019-02-05T23:00:00.000Z","end":"2019-02-08T23:00:00.000Z"},{"start":"2019-02-16T23:00:00.000Z","end":"2019-02-22T23:00:00.000Z"},{"start":"2019-02-23T23:00:00.000Z","end":"2019-02-27T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-12T23:00:00.000Z"},{"start":"2019-03-20T23:00:00.000Z","end":"2019-03-23T23:00:00.000Z"},{"start":"2019-04-07T22:00:00.000Z","end":"2019-04-08T22:00:00.000Z"},{"start":"2019-04-22T22:00:00.000Z","end":"2019-05-03T22:00:00.000Z"},{"start":"2019-05-09T22:00:00.000Z","end":"2019-05-16T22:00:00.000Z"},{"start":"2019-05-24T22:00:00.000Z","end":"2019-05-29T22:00:00.000Z"},{"start":"2019-05-30T22:00:00.000Z","end":"2019-05-31T22:00:00.000Z"},{"start":"2019-06-15T22:00:00.000Z","end":"2019-06-18T22:00:00.000Z"},{"start":"2019-06-29T22:00:00.000Z","end":"2019-07-10T22:00:00.000Z"},{"start":"2019-07-20T22:00:00.000Z","end":"2019-08-01T22:00:00.000Z"}]},{"name":"Unit 9","reservations":[{"start":"2019-01-11T23:00:00.000Z","end":"2019-01-24T23:00:00.000Z"},{"start":"2019-02-03T23:00:00.000Z","end":"2019-02-12T23:00:00.000Z"},{"start":"2019-02-16T23:00:00.000Z","end":"2019-02-18T23:00:00.000Z"},{"start":"2019-02-24T23:00:00.000Z","end":"2019-02-26T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-22T23:00:00.000Z"},{"start":"2019-04-11T22:00:00.000Z","end":"2019-04-23T22:00:00.000Z"},{"start":"2019-05-04T22:00:00.000Z","end":"2019-05-14T22:00:00.000Z"},{"start":"2019-05-26T22:00:00.000Z","end":"2019-05-29T22:00:00.000Z"},{"start":"2019-06-18T22:00:00.000Z","end":"2019-06-23T22:00:00.000Z"},{"start":"2019-07-06T22:00:00.000Z","end":"2019-07-16T22:00:00.000Z"},{"start":"2019-07-26T22:00:00.000Z","end":"2019-07-29T22:00:00.000Z"},{"start":"2019-08-14T22:00:00.000Z","end":"2019-08-21T22:00:00.000Z"},{"start":"2019-08-31T22:00:00.000Z","end":"2019-09-06T22:00:00.000Z"}]}],[{"name":"Unit 1","reservations":[{"start":"2019-01-01T23:00:00.000Z","end":"2019-01-07T23:00:00.000Z"},{"start":"2019-01-18T23:00:00.000Z","end":"2019-01-28T23:00:00.000Z"},{"start":"2019-01-31T23:00:00.000Z","end":"2019-02-13T23:00:00.000Z"},{"start":"2019-02-26T23:00:00.000Z","end":"2019-03-11T23:00:00.000Z"},{"start":"2019-03-17T23:00:00.000Z","end":"2019-03-20T23:00:00.000Z"},{"start":"2019-03-24T23:00:00.000Z","end":"2019-04-04T22:00:00.000Z"},{"start":"2019-04-10T22:00:00.000Z","end":"2019-04-21T22:00:00.000Z"},{"start":"2019-05-05T22:00:00.000Z","end":"2019-05-06T22:00:00.000Z"},{"start":"2019-05-09T22:00:00.000Z","end":"2019-05-20T22:00:00.000Z"},{"start":"2019-05-29T22:00:00.000Z","end":"2019-05-30T22:00:00.000Z"},{"start":"2019-06-10T22:00:00.000Z","end":"2019-06-15T22:00:00.000Z"},{"start":"2019-07-01T22:00:00.000Z","end":"2019-07-07T22:00:00.000Z"},{"start":"2019-07-16T22:00:00.000Z","end":"2019-07-18T22:00:00.000Z"},{"start":"2019-07-22T22:00:00.000Z","end":"2019-08-04T22:00:00.000Z"},{"start":"2019-08-06T22:00:00.000Z","end":"2019-08-14T22:00:00.000Z"}]},{"name":"Unit 2","reservations":[{"start":"2019-01-22T23:00:00.000Z","end":"2019-01-25T23:00:00.000Z"},{"start":"2019-02-15T23:00:00.000Z","end":"2019-02-19T23:00:00.000Z"},{"start":"2019-02-21T23:00:00.000Z","end":"2019-03-02T23:00:00.000Z"},{"start":"2019-03-18T23:00:00.000Z","end":"2019-03-20T23:00:00.000Z"},{"start":"2019-04-01T22:00:00.000Z","end":"2019-04-12T22:00:00.000Z"},{"start":"2019-05-01T22:00:00.000Z","end":"2019-05-14T22:00:00.000Z"},{"start":"2019-05-28T22:00:00.000Z","end":"2019-06-10T22:00:00.000Z"},{"start":"2019-06-21T22:00:00.000Z","end":"2019-06-24T22:00:00.000Z"},{"start":"2019-07-13T22:00:00.000Z","end":"2019-07-20T22:00:00.000Z"},{"start":"2019-08-06T22:00:00.000Z","end":"2019-08-07T22:00:00.000Z"},{"start":"2019-08-10T22:00:00.000Z","end":"2019-08-14T22:00:00.000Z"},{"start":"2019-08-29T22:00:00.000Z","end":"2019-09-09T22:00:00.000Z"},{"start":"2019-09-11T22:00:00.000Z","end":"2019-09-18T22:00:00.000Z"}]},{"name":"Unit 3","reservations":[{"start":"2019-01-11T23:00:00.000Z","end":"2019-01-17T23:00:00.000Z"},{"start":"2019-01-23T23:00:00.000Z","end":"2019-01-29T23:00:00.000Z"},{"start":"2019-02-01T23:00:00.000Z","end":"2019-02-06T23:00:00.000Z"},{"start":"2019-02-21T23:00:00.000Z","end":"2019-02-23T23:00:00.000Z"},{"start":"2019-03-06T23:00:00.000Z","end":"2019-03-19T23:00:00.000Z"},{"start":"2019-03-22T23:00:00.000Z","end":"2019-03-25T23:00:00.000Z"},{"start":"2019-04-14T22:00:00.000Z","end":"2019-04-25T22:00:00.000Z"},{"start":"2019-05-17T22:00:00.000Z","end":"2019-05-19T22:00:00.000Z"},{"start":"2019-05-28T22:00:00.000Z","end":"2019-06-02T22:00:00.000Z"},{"start":"2019-06-17T22:00:00.000Z","end":"2019-06-25T22:00:00.000Z"},{"start":"2019-07-02T22:00:00.000Z","end":"2019-07-10T22:00:00.000Z"},{"start":"2019-07-26T22:00:00.000Z","end":"2019-07-28T22:00:00.000Z"},{"start":"2019-08-02T22:00:00.000Z","end":"2019-08-10T22:00:00.000Z"}]},{"name":"Unit 4","reservations":[{"start":"2019-01-07T23:00:00.000Z","end":"2019-01-12T23:00:00.000Z"},{"start":"2019-01-21T23:00:00.000Z","end":"2019-01-23T23:00:00.000Z"},{"start":"2019-01-24T23:00:00.000Z","end":"2019-01-25T23:00:00.000Z"},{"start":"2019-01-28T23:00:00.000Z","end":"2019-02-07T23:00:00.000Z"},{"start":"2019-02-13T23:00:00.000Z","end":"2019-02-17T23:00:00.000Z"},{"start":"2019-02-19T23:00:00.000Z","end":"2019-03-01T23:00:00.000Z"},{"start":"2019-03-13T23:00:00.000Z","end":"2019-03-16T23:00:00.000Z"},{"start":"2019-03-17T23:00:00.000Z","end":"2019-03-20T23:00:00.000Z"},{"start":"2019-03-27T23:00:00.000Z","end":"2019-03-31T22:00:00.000Z"},{"start":"2019-04-11T22:00:00.000Z","end":"2019-04-21T22:00:00.000Z"},{"start":"2019-04-30T22:00:00.000Z","end":"2019-05-06T22:00:00.000Z"},{"start":"2019-05-19T22:00:00.000Z","end":"2019-06-01T22:00:00.000Z"},{"start":"2019-06-08T22:00:00.000Z","end":"2019-06-19T22:00:00.000Z"},{"start":"2019-06-22T22:00:00.000Z","end":"2019-06-28T22:00:00.000Z"},{"start":"2019-07-10T22:00:00.000Z","end":"2019-07-19T22:00:00.000Z"},{"start":"2019-07-26T22:00:00.000Z","end":"2019-08-04T22:00:00.000Z"},{"start":"2019-08-11T22:00:00.000Z","end":"2019-08-14T22:00:00.000Z"},{"start":"2019-08-15T22:00:00.000Z","end":"2019-08-16T22:00:00.000Z"},{"start":"2019-08-18T22:00:00.000Z","end":"2019-08-31T22:00:00.000Z"}]},{"name":"Unit 5","reservations":[{"start":"2019-01-22T23:00:00.000Z","end":"2019-02-04T23:00:00.000Z"},{"start":"2019-02-23T23:00:00.000Z","end":"2019-03-03T23:00:00.000Z"},{"start":"2019-03-13T23:00:00.000Z","end":"2019-03-17T23:00:00.000Z"},{"start":"2019-03-19T23:00:00.000Z","end":"2019-03-23T23:00:00.000Z"},{"start":"2019-03-29T23:00:00.000Z","end":"2019-04-02T22:00:00.000Z"},{"start":"2019-04-22T22:00:00.000Z","end":"2019-05-03T22:00:00.000Z"},{"start":"2019-05-10T22:00:00.000Z","end":"2019-05-14T22:00:00.000Z"},{"start":"2019-05-23T22:00:00.000Z","end":"2019-06-05T22:00:00.000Z"},{"start":"2019-06-19T22:00:00.000Z","end":"2019-06-22T22:00:00.000Z"},{"start":"2019-06-30T22:00:00.000Z","end":"2019-07-10T22:00:00.000Z"},{"start":"2019-07-11T22:00:00.000Z","end":"2019-07-23T22:00:00.000Z"},{"start":"2019-08-10T22:00:00.000Z","end":"2019-08-16T22:00:00.000Z"}]}],[{"name":"Unit 1","reservations":[{"start":"2019-01-13T23:00:00.000Z","end":"2019-01-24T23:00:00.000Z"},{"start":"2019-02-14T23:00:00.000Z","end":"2019-02-24T23:00:00.000Z"},{"start":"2019-03-09T23:00:00.000Z","end":"2019-03-13T23:00:00.000Z"},{"start":"2019-03-29T23:00:00.000Z","end":"2019-03-31T22:00:00.000Z"},{"start":"2019-04-20T22:00:00.000Z","end":"2019-04-24T22:00:00.000Z"},{"start":"2019-04-27T22:00:00.000Z","end":"2019-05-10T22:00:00.000Z"},{"start":"2019-05-18T22:00:00.000Z","end":"2019-05-27T22:00:00.000Z"},{"start":"2019-06-06T22:00:00.000Z","end":"2019-06-09T22:00:00.000Z"},{"start":"2019-06-17T22:00:00.000Z","end":"2019-06-19T22:00:00.000Z"},{"start":"2019-06-21T22:00:00.000Z","end":"2019-06-23T22:00:00.000Z"},{"start":"2019-07-10T22:00:00.000Z","end":"2019-07-11T22:00:00.000Z"},{"start":"2019-07-24T22:00:00.000Z","end":"2019-07-27T22:00:00.000Z"}]},{"name":"Unit 2","reservations":[{"start":"2019-01-14T23:00:00.000Z","end":"2019-01-17T23:00:00.000Z"},{"start":"2019-01-24T23:00:00.000Z","end":"2019-02-06T23:00:00.000Z"},{"start":"2019-02-17T23:00:00.000Z","end":"2019-02-27T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-24T23:00:00.000Z"},{"start":"2019-04-02T22:00:00.000Z","end":"2019-04-07T22:00:00.000Z"},{"start":"2019-04-24T22:00:00.000Z","end":"2019-04-27T22:00:00.000Z"},{"start":"2019-04-28T22:00:00.000Z","end":"2019-04-29T22:00:00.000Z"},{"start":"2019-05-16T22:00:00.000Z","end":"2019-05-23T22:00:00.000Z"},{"start":"2019-06-05T22:00:00.000Z","end":"2019-06-07T22:00:00.000Z"},{"start":"2019-06-08T22:00:00.000Z","end":"2019-06-15T22:00:00.000Z"},{"start":"2019-06-29T22:00:00.000Z","end":"2019-07-11T22:00:00.000Z"},{"start":"2019-07-20T22:00:00.000Z","end":"2019-07-31T22:00:00.000Z"},{"start":"2019-08-13T22:00:00.000Z","end":"2019-08-15T22:00:00.000Z"},{"start":"2019-08-28T22:00:00.000Z","end":"2019-09-02T22:00:00.000Z"},{"start":"2019-09-15T22:00:00.000Z","end":"2019-09-25T22:00:00.000Z"},{"start":"2019-09-30T22:00:00.000Z","end":"2019-10-06T22:00:00.000Z"}]},{"name":"Unit 3","reservations":[{"start":"2019-01-13T23:00:00.000Z","end":"2019-01-22T23:00:00.000Z"},{"start":"2019-01-31T23:00:00.000Z","end":"2019-02-09T23:00:00.000Z"},{"start":"2019-02-12T23:00:00.000Z","end":"2019-02-24T23:00:00.000Z"},{"start":"2019-02-26T23:00:00.000Z","end":"2019-02-27T23:00:00.000Z"},{"start":"2019-03-01T23:00:00.000Z","end":"2019-03-02T23:00:00.000Z"},{"start":"2019-03-14T23:00:00.000Z","end":"2019-03-23T23:00:00.000Z"},{"start":"2019-03-25T23:00:00.000Z","end":"2019-03-30T23:00:00.000Z"},{"start":"2019-04-13T22:00:00.000Z","end":"2019-04-17T22:00:00.000Z"},{"start":"2019-04-23T22:00:00.000Z","end":"2019-05-02T22:00:00.000Z"},{"start":"2019-05-11T22:00:00.000Z","end":"2019-05-18T22:00:00.000Z"},{"start":"2019-06-02T22:00:00.000Z","end":"2019-06-03T22:00:00.000Z"},{"start":"2019-06-09T22:00:00.000Z","end":"2019-06-17T22:00:00.000Z"},{"start":"2019-06-19T22:00:00.000Z","end":"2019-06-29T22:00:00.000Z"},{"start":"2019-07-03T22:00:00.000Z","end":"2019-07-15T22:00:00.000Z"},{"start":"2019-07-26T22:00:00.000Z","end":"2019-08-06T22:00:00.000Z"},{"start":"2019-08-07T22:00:00.000Z","end":"2019-08-19T22:00:00.000Z"},{"start":"2019-08-24T22:00:00.000Z","end":"2019-09-02T22:00:00.000Z"}]},{"name":"Unit 4","reservations":[{"start":"2019-01-08T23:00:00.000Z","end":"2019-01-09T23:00:00.000Z"},{"start":"2019-01-19T23:00:00.000Z","end":"2019-01-26T23:00:00.000Z"},{"start":"2019-02-06T23:00:00.000Z","end":"2019-02-11T23:00:00.000Z"},{"start":"2019-03-04T23:00:00.000Z","end":"2019-03-16T23:00:00.000Z"},{"start":"2019-03-31T22:00:00.000Z","end":"2019-04-06T22:00:00.000Z"},{"start":"2019-04-18T22:00:00.000Z","end":"2019-04-26T22:00:00.000Z"},{"start":"2019-05-06T22:00:00.000Z","end":"2019-05-10T22:00:00.000Z"},{"start":"2019-05-16T22:00:00.000Z","end":"2019-05-21T22:00:00.000Z"},{"start":"2019-05-29T22:00:00.000Z","end":"2019-06-11T22:00:00.000Z"},{"start":"2019-06-19T22:00:00.000Z","end":"2019-06-30T22:00:00.000Z"},{"start":"2019-07-15T22:00:00.000Z","end":"2019-07-25T22:00:00.000Z"},{"start":"2019-07-29T22:00:00.000Z","end":"2019-08-08T22:00:00.000Z"},{"start":"2019-08-18T22:00:00.000Z","end":"2019-08-31T22:00:00.000Z"}]},{"name":"Unit 5","reservations":[{"start":"2019-01-08T23:00:00.000Z","end":"2019-01-21T23:00:00.000Z"},{"start":"2019-01-25T23:00:00.000Z","end":"2019-01-26T23:00:00.000Z"},{"start":"2019-01-30T23:00:00.000Z","end":"2019-02-08T23:00:00.000Z"},{"start":"2019-02-20T23:00:00.000Z","end":"2019-03-05T23:00:00.000Z"},{"start":"2019-03-09T23:00:00.000Z","end":"2019-03-12T23:00:00.000Z"},{"start":"2019-03-20T23:00:00.000Z","end":"2019-04-01T22:00:00.000Z"},{"start":"2019-04-08T22:00:00.000Z","end":"2019-04-09T22:00:00.000Z"},{"start":"2019-04-18T22:00:00.000Z","end":"2019-04-22T22:00:00.000Z"},{"start":"2019-04-30T22:00:00.000Z","end":"2019-05-13T22:00:00.000Z"},{"start":"2019-05-14T22:00:00.000Z","end":"2019-05-26T22:00:00.000Z"},{"start":"2019-05-29T22:00:00.000Z","end":"2019-06-01T22:00:00.000Z"},{"start":"2019-06-05T22:00:00.000Z","end":"2019-06-18T22:00:00.000Z"},{"start":"2019-06-25T22:00:00.000Z","end":"2019-06-27T22:00:00.000Z"},{"start":"2019-07-06T22:00:00.000Z","end":"2019-07-07T22:00:00.000Z"},{"start":"2019-07-16T22:00:00.000Z","end":"2019-07-18T22:00:00.000Z"},{"start":"2019-07-31T22:00:00.000Z","end":"2019-08-13T22:00:00.000Z"},{"start":"2019-08-18T22:00:00.000Z","end":"2019-08-31T22:00:00.000Z"}]},{"name":"Unit 6","reservations":[{"start":"2019-01-12T23:00:00.000Z","end":"2019-01-15T23:00:00.000Z"},{"start":"2019-01-24T23:00:00.000Z","end":"2019-02-02T23:00:00.000Z"},{"start":"2019-02-15T23:00:00.000Z","end":"2019-02-22T23:00:00.000Z"},{"start":"2019-03-04T23:00:00.000Z","end":"2019-03-07T23:00:00.000Z"},{"start":"2019-03-13T23:00:00.000Z","end":"2019-03-25T23:00:00.000Z"},{"start":"2019-04-13T22:00:00.000Z","end":"2019-04-24T22:00:00.000Z"},{"start":"2019-04-29T22:00:00.000Z","end":"2019-05-10T22:00:00.000Z"},{"start":"2019-05-17T22:00:00.000Z","end":"2019-05-26T22:00:00.000Z"},{"start":"2019-05-29T22:00:00.000Z","end":"2019-05-30T22:00:00.000Z"},{"start":"2019-06-01T22:00:00.000Z","end":"2019-06-11T22:00:00.000Z"},{"start":"2019-06-19T22:00:00.000Z","end":"2019-06-21T22:00:00.000Z"},{"start":"2019-07-09T22:00:00.000Z","end":"2019-07-18T22:00:00.000Z"},{"start":"2019-07-25T22:00:00.000Z","end":"2019-08-05T22:00:00.000Z"},{"start":"2019-08-22T22:00:00.000Z","end":"2019-08-31T22:00:00.000Z"}]},{"name":"Unit 7","reservations":[{"start":"2019-01-19T23:00:00.000Z","end":"2019-01-30T23:00:00.000Z"},{"start":"2019-02-01T23:00:00.000Z","end":"2019-02-14T23:00:00.000Z"},{"start":"2019-02-25T23:00:00.000Z","end":"2019-03-07T23:00:00.000Z"},{"start":"2019-03-10T23:00:00.000Z","end":"2019-03-11T23:00:00.000Z"},{"start":"2019-03-29T23:00:00.000Z","end":"2019-04-06T22:00:00.000Z"},{"start":"2019-04-09T22:00:00.000Z","end":"2019-04-16T22:00:00.000Z"},{"start":"2019-05-03T22:00:00.000Z","end":"2019-05-11T22:00:00.000Z"},{"start":"2019-05-12T22:00:00.000Z","end":"2019-05-25T22:00:00.000Z"},{"start":"2019-06-02T22:00:00.000Z","end":"2019-06-12T22:00:00.000Z"},{"start":"2019-06-13T22:00:00.000Z","end":"2019-06-23T22:00:00.000Z"},{"start":"2019-07-08T22:00:00.000Z","end":"2019-07-14T22:00:00.000Z"},{"start":"2019-07-31T22:00:00.000Z","end":"2019-08-07T22:00:00.000Z"},{"start":"2019-08-29T22:00:00.000Z","end":"2019-09-02T22:00:00.000Z"}]},{"name":"Unit 8","reservations":[{"start":"2019-01-05T23:00:00.000Z","end":"2019-01-13T23:00:00.000Z"},{"start":"2019-01-20T23:00:00.000Z","end":"2019-01-31T23:00:00.000Z"},{"start":"2019-02-12T23:00:00.000Z","end":"2019-02-17T23:00:00.000Z"},{"start":"2019-02-22T23:00:00.000Z","end":"2019-02-28T23:00:00.000Z"},{"start":"2019-03-01T23:00:00.000Z","end":"2019-03-04T23:00:00.000Z"},{"start":"2019-03-06T23:00:00.000Z","end":"2019-03-07T23:00:00.000Z"},{"start":"2019-03-09T23:00:00.000Z","end":"2019-03-21T23:00:00.000Z"},{"start":"2019-03-30T23:00:00.000Z","end":"2019-04-10T22:00:00.000Z"},{"start":"2019-04-21T22:00:00.000Z","end":"2019-05-01T22:00:00.000Z"},{"start":"2019-05-19T22:00:00.000Z","end":"2019-05-24T22:00:00.000Z"},{"start":"2019-05-28T22:00:00.000Z","end":"2019-06-06T22:00:00.000Z"},{"start":"2019-06-11T22:00:00.000Z","end":"2019-06-24T22:00:00.000Z"},{"start":"2019-07-08T22:00:00.000Z","end":"2019-07-13T22:00:00.000Z"},{"start":"2019-07-26T22:00:00.000Z","end":"2019-08-01T22:00:00.000Z"},{"start":"2019-08-17T22:00:00.000Z","end":"2019-08-21T22:00:00.000Z"}]},{"name":"Unit 9","reservations":[{"start":"2019-01-16T23:00:00.000Z","end":"2019-01-22T23:00:00.000Z"},{"start":"2019-02-09T23:00:00.000Z","end":"2019-02-16T23:00:00.000Z"},{"start":"2019-02-17T23:00:00.000Z","end":"2019-02-27T23:00:00.000Z"},{"start":"2019-03-02T23:00:00.000Z","end":"2019-03-11T23:00:00.000Z"},{"start":"2019-03-15T23:00:00.000Z","end":"2019-03-20T23:00:00.000Z"},{"start":"2019-04-09T22:00:00.000Z","end":"2019-04-16T22:00:00.000Z"},{"start":"2019-05-02T22:00:00.000Z","end":"2019-05-14T22:00:00.000Z"},{"start":"2019-05-20T22:00:00.000Z","end":"2019-05-24T22:00:00.000Z"},{"start":"2019-06-10T22:00:00.000Z","end":"2019-06-22T22:00:00.000Z"},{"start":"2019-06-30T22:00:00.000Z","end":"2019-07-02T22:00:00.000Z"},{"start":"2019-07-11T22:00:00.000Z","end":"2019-07-15T22:00:00.000Z"},{"start":"2019-08-05T22:00:00.000Z","end":"2019-08-06T22:00:00.000Z"}]},{"name":"Unit 10","reservations":[{"start":"2019-01-01T23:00:00.000Z","end":"2019-01-03T23:00:00.000Z"},{"start":"2019-01-14T23:00:00.000Z","end":"2019-01-17T23:00:00.000Z"},{"start":"2019-01-18T23:00:00.000Z","end":"2019-01-21T23:00:00.000Z"},{"start":"2019-01-25T23:00:00.000Z","end":"2019-02-04T23:00:00.000Z"},{"start":"2019-02-10T23:00:00.000Z","end":"2019-02-18T23:00:00.000Z"},{"start":"2019-03-02T23:00:00.000Z","end":"2019-03-03T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-22T23:00:00.000Z"},{"start":"2019-04-11T22:00:00.000Z","end":"2019-04-18T22:00:00.000Z"},{"start":"2019-04-23T22:00:00.000Z","end":"2019-05-03T22:00:00.000Z"},{"start":"2019-05-19T22:00:00.000Z","end":"2019-05-26T22:00:00.000Z"},{"start":"2019-05-28T22:00:00.000Z","end":"2019-05-31T22:00:00.000Z"},{"start":"2019-06-11T22:00:00.000Z","end":"2019-06-20T22:00:00.000Z"},{"start":"2019-07-05T22:00:00.000Z","end":"2019-07-14T22:00:00.000Z"},{"start":"2019-07-21T22:00:00.000Z","end":"2019-07-24T22:00:00.000Z"}]}],[{"name":"Unit 1","reservations":[{"start":"2019-01-10T23:00:00.000Z","end":"2019-01-22T23:00:00.000Z"},{"start":"2019-02-13T23:00:00.000Z","end":"2019-02-22T23:00:00.000Z"},{"start":"2019-02-28T23:00:00.000Z","end":"2019-03-12T23:00:00.000Z"},{"start":"2019-04-03T22:00:00.000Z","end":"2019-04-11T22:00:00.000Z"},{"start":"2019-04-18T22:00:00.000Z","end":"2019-04-27T22:00:00.000Z"},{"start":"2019-05-15T22:00:00.000Z","end":"2019-05-23T22:00:00.000Z"},{"start":"2019-05-31T22:00:00.000Z","end":"2019-06-08T22:00:00.000Z"},{"start":"2019-06-23T22:00:00.000Z","end":"2019-07-06T22:00:00.000Z"},{"start":"2019-07-10T22:00:00.000Z","end":"2019-07-21T22:00:00.000Z"},{"start":"2019-08-02T22:00:00.000Z","end":"2019-08-09T22:00:00.000Z"},{"start":"2019-08-10T22:00:00.000Z","end":"2019-08-19T22:00:00.000Z"}]},{"name":"Unit 2","reservations":[{"start":"2019-01-23T23:00:00.000Z","end":"2019-01-28T23:00:00.000Z"},{"start":"2019-02-07T23:00:00.000Z","end":"2019-02-14T23:00:00.000Z"},{"start":"2019-03-13T23:00:00.000Z","end":"2019-03-26T23:00:00.000Z"},{"start":"2019-04-16T22:00:00.000Z","end":"2019-04-20T22:00:00.000Z"},{"start":"2019-04-26T22:00:00.000Z","end":"2019-04-30T22:00:00.000Z"},{"start":"2019-05-04T22:00:00.000Z","end":"2019-05-09T22:00:00.000Z"},{"start":"2019-05-29T22:00:00.000Z","end":"2019-06-08T22:00:00.000Z"},{"start":"2019-06-16T22:00:00.000Z","end":"2019-06-17T22:00:00.000Z"},{"start":"2019-06-18T22:00:00.000Z","end":"2019-06-25T22:00:00.000Z"},{"start":"2019-07-06T22:00:00.000Z","end":"2019-07-12T22:00:00.000Z"},{"start":"2019-07-29T22:00:00.000Z","end":"2019-08-03T22:00:00.000Z"}]},{"name":"Unit 3","reservations":[{"start":"2019-01-05T23:00:00.000Z","end":"2019-01-09T23:00:00.000Z"},{"start":"2019-01-20T23:00:00.000Z","end":"2019-01-30T23:00:00.000Z"},{"start":"2019-01-31T23:00:00.000Z","end":"2019-02-11T23:00:00.000Z"},{"start":"2019-02-24T23:00:00.000Z","end":"2019-03-04T23:00:00.000Z"},{"start":"2019-03-08T23:00:00.000Z","end":"2019-03-20T23:00:00.000Z"},{"start":"2019-03-22T23:00:00.000Z","end":"2019-04-01T22:00:00.000Z"},{"start":"2019-04-04T22:00:00.000Z","end":"2019-04-08T22:00:00.000Z"},{"start":"2019-04-14T22:00:00.000Z","end":"2019-04-17T22:00:00.000Z"},{"start":"2019-04-27T22:00:00.000Z","end":"2019-05-09T22:00:00.000Z"},{"start":"2019-05-13T22:00:00.000Z","end":"2019-05-16T22:00:00.000Z"},{"start":"2019-05-17T22:00:00.000Z","end":"2019-05-18T22:00:00.000Z"},{"start":"2019-05-26T22:00:00.000Z","end":"2019-05-29T22:00:00.000Z"},{"start":"2019-06-09T22:00:00.000Z","end":"2019-06-18T22:00:00.000Z"},{"start":"2019-06-20T22:00:00.000Z","end":"2019-07-02T22:00:00.000Z"},{"start":"2019-07-08T22:00:00.000Z","end":"2019-07-11T22:00:00.000Z"},{"start":"2019-07-16T22:00:00.000Z","end":"2019-07-28T22:00:00.000Z"},{"start":"2019-08-04T22:00:00.000Z","end":"2019-08-11T22:00:00.000Z"},{"start":"2019-08-23T22:00:00.000Z","end":"2019-09-05T22:00:00.000Z"}]},{"name":"Unit 4","reservations":[{"start":"2019-01-02T23:00:00.000Z","end":"2019-01-09T23:00:00.000Z"},{"start":"2019-01-16T23:00:00.000Z","end":"2019-01-24T23:00:00.000Z"},{"start":"2019-01-30T23:00:00.000Z","end":"2019-02-12T23:00:00.000Z"},{"start":"2019-02-13T23:00:00.000Z","end":"2019-02-24T23:00:00.000Z"},{"start":"2019-03-08T23:00:00.000Z","end":"2019-03-20T23:00:00.000Z"},{"start":"2019-03-24T23:00:00.000Z","end":"2019-04-04T22:00:00.000Z"},{"start":"2019-04-12T22:00:00.000Z","end":"2019-04-24T22:00:00.000Z"},{"start":"2019-04-29T22:00:00.000Z","end":"2019-05-08T22:00:00.000Z"},{"start":"2019-05-15T22:00:00.000Z","end":"2019-05-28T22:00:00.000Z"},{"start":"2019-06-03T22:00:00.000Z","end":"2019-06-05T22:00:00.000Z"},{"start":"2019-06-14T22:00:00.000Z","end":"2019-06-19T22:00:00.000Z"},{"start":"2019-06-20T22:00:00.000Z","end":"2019-06-22T22:00:00.000Z"},{"start":"2019-06-28T22:00:00.000Z","end":"2019-07-07T22:00:00.000Z"},{"start":"2019-07-18T22:00:00.000Z","end":"2019-07-29T22:00:00.000Z"},{"start":"2019-08-03T22:00:00.000Z","end":"2019-08-08T22:00:00.000Z"},{"start":"2019-08-10T22:00:00.000Z","end":"2019-08-13T22:00:00.000Z"},{"start":"2019-08-18T22:00:00.000Z","end":"2019-08-27T22:00:00.000Z"},{"start":"2019-09-01T22:00:00.000Z","end":"2019-09-07T22:00:00.000Z"},{"start":"2019-09-11T22:00:00.000Z","end":"2019-09-17T22:00:00.000Z"}]},{"name":"Unit 5","reservations":[{"start":"2019-01-08T23:00:00.000Z","end":"2019-01-16T23:00:00.000Z"},{"start":"2019-01-22T23:00:00.000Z","end":"2019-01-28T23:00:00.000Z"},{"start":"2019-02-11T23:00:00.000Z","end":"2019-02-21T23:00:00.000Z"},{"start":"2019-03-11T23:00:00.000Z","end":"2019-03-15T23:00:00.000Z"},{"start":"2019-04-04T22:00:00.000Z","end":"2019-04-15T22:00:00.000Z"},{"start":"2019-05-03T22:00:00.000Z","end":"2019-05-12T22:00:00.000Z"},{"start":"2019-05-15T22:00:00.000Z","end":"2019-05-16T22:00:00.000Z"},{"start":"2019-05-18T22:00:00.000Z","end":"2019-05-27T22:00:00.000Z"},{"start":"2019-06-21T22:00:00.000Z","end":"2019-06-28T22:00:00.000Z"},{"start":"2019-07-21T22:00:00.000Z","end":"2019-07-22T22:00:00.000Z"},{"start":"2019-07-30T22:00:00.000Z","end":"2019-08-02T22:00:00.000Z"}]},{"name":"Unit 6","reservations":[{"start":"2019-01-12T23:00:00.000Z","end":"2019-01-13T23:00:00.000Z"},{"start":"2019-01-17T23:00:00.000Z","end":"2019-01-27T23:00:00.000Z"},{"start":"2019-02-11T23:00:00.000Z","end":"2019-02-19T23:00:00.000Z"},{"start":"2019-02-20T23:00:00.000Z","end":"2019-02-22T23:00:00.000Z"},{"start":"2019-03-02T23:00:00.000Z","end":"2019-03-11T23:00:00.000Z"},{"start":"2019-03-25T23:00:00.000Z","end":"2019-03-30T23:00:00.000Z"},{"start":"2019-04-06T22:00:00.000Z","end":"2019-04-07T22:00:00.000Z"},{"start":"2019-04-10T22:00:00.000Z","end":"2019-04-21T22:00:00.000Z"},{"start":"2019-05-12T22:00:00.000Z","end":"2019-05-24T22:00:00.000Z"},{"start":"2019-06-08T22:00:00.000Z","end":"2019-06-21T22:00:00.000Z"},{"start":"2019-07-06T22:00:00.000Z","end":"2019-07-16T22:00:00.000Z"},{"start":"2019-07-31T22:00:00.000Z","end":"2019-08-13T22:00:00.000Z"}]},{"name":"Unit 7","reservations":[{"start":"2019-01-06T23:00:00.000Z","end":"2019-01-09T23:00:00.000Z"},{"start":"2019-01-14T23:00:00.000Z","end":"2019-01-21T23:00:00.000Z"},{"start":"2019-02-04T23:00:00.000Z","end":"2019-02-11T23:00:00.000Z"},{"start":"2019-02-15T23:00:00.000Z","end":"2019-02-18T23:00:00.000Z"},{"start":"2019-02-21T23:00:00.000Z","end":"2019-03-04T23:00:00.000Z"},{"start":"2019-03-14T23:00:00.000Z","end":"2019-03-19T23:00:00.000Z"},{"start":"2019-03-27T23:00:00.000Z","end":"2019-03-30T23:00:00.000Z"},{"start":"2019-04-13T22:00:00.000Z","end":"2019-04-25T22:00:00.000Z"},{"start":"2019-05-11T22:00:00.000Z","end":"2019-05-18T22:00:00.000Z"},{"start":"2019-05-20T22:00:00.000Z","end":"2019-05-31T22:00:00.000Z"},{"start":"2019-06-10T22:00:00.000Z","end":"2019-06-15T22:00:00.000Z"},{"start":"2019-07-01T22:00:00.000Z","end":"2019-07-05T22:00:00.000Z"},{"start":"2019-07-17T22:00:00.000Z","end":"2019-07-26T22:00:00.000Z"},{"start":"2019-08-07T22:00:00.000Z","end":"2019-08-17T22:00:00.000Z"},{"start":"2019-09-02T22:00:00.000Z","end":"2019-09-05T22:00:00.000Z"},{"start":"2019-09-20T22:00:00.000Z","end":"2019-09-25T22:00:00.000Z"}]}],[{"name":"Unit 1","reservations":[{"start":"2019-01-12T23:00:00.000Z","end":"2019-01-25T23:00:00.000Z"},{"start":"2019-02-14T23:00:00.000Z","end":"2019-02-19T23:00:00.000Z"},{"start":"2019-03-10T23:00:00.000Z","end":"2019-03-18T23:00:00.000Z"},{"start":"2019-03-24T23:00:00.000Z","end":"2019-04-06T22:00:00.000Z"},{"start":"2019-04-14T22:00:00.000Z","end":"2019-04-22T22:00:00.000Z"},{"start":"2019-05-05T22:00:00.000Z","end":"2019-05-06T22:00:00.000Z"},{"start":"2019-05-07T22:00:00.000Z","end":"2019-05-10T22:00:00.000Z"},{"start":"2019-05-21T22:00:00.000Z","end":"2019-05-24T22:00:00.000Z"},{"start":"2019-06-02T22:00:00.000Z","end":"2019-06-12T22:00:00.000Z"},{"start":"2019-06-22T22:00:00.000Z","end":"2019-07-03T22:00:00.000Z"},{"start":"2019-07-15T22:00:00.000Z","end":"2019-07-25T22:00:00.000Z"},{"start":"2019-08-09T22:00:00.000Z","end":"2019-08-22T22:00:00.000Z"}]},{"name":"Unit 2","reservations":[{"start":"2019-01-02T23:00:00.000Z","end":"2019-01-12T23:00:00.000Z"},{"start":"2019-01-22T23:00:00.000Z","end":"2019-01-23T23:00:00.000Z"},{"start":"2019-02-05T23:00:00.000Z","end":"2019-02-10T23:00:00.000Z"},{"start":"2019-02-15T23:00:00.000Z","end":"2019-02-19T23:00:00.000Z"},{"start":"2019-02-24T23:00:00.000Z","end":"2019-03-01T23:00:00.000Z"},{"start":"2019-03-02T23:00:00.000Z","end":"2019-03-15T23:00:00.000Z"},{"start":"2019-03-28T23:00:00.000Z","end":"2019-04-10T22:00:00.000Z"},{"start":"2019-04-16T22:00:00.000Z","end":"2019-04-20T22:00:00.000Z"},{"start":"2019-05-05T22:00:00.000Z","end":"2019-05-09T22:00:00.000Z"},{"start":"2019-05-17T22:00:00.000Z","end":"2019-05-28T22:00:00.000Z"},{"start":"2019-06-12T22:00:00.000Z","end":"2019-06-23T22:00:00.000Z"},{"start":"2019-07-07T22:00:00.000Z","end":"2019-07-19T22:00:00.000Z"},{"start":"2019-07-20T22:00:00.000Z","end":"2019-07-30T22:00:00.000Z"},{"start":"2019-08-06T22:00:00.000Z","end":"2019-08-07T22:00:00.000Z"},{"start":"2019-08-09T22:00:00.000Z","end":"2019-08-20T22:00:00.000Z"},{"start":"2019-08-27T22:00:00.000Z","end":"2019-09-06T22:00:00.000Z"},{"start":"2019-09-07T22:00:00.000Z","end":"2019-09-18T22:00:00.000Z"}]}]];
		const articles_available_data = [];
		const chars = "abcde";

		for (let i = 0; i < articles_data.length; i++) {
			const article_data = articles_data[i];
			const article_available_data = [];

			// Build the tasks
			const tasks = [];
			for (let unit = 0; unit < article_data.length; unit++) {
				const unit_data = article_data[unit];
				unit_data["reservations"].forEach(function(period) {
					period["start"] = new Date(period["start"]);
					period["end"] = new Date(period["end"]);
				});

				const unit_available_data = reservation_to_availability(
						unit_data["reservations"],
						new Date(2019, 0, 1),
						new Date(2019, 11, 31)
				);
				const task = {
					name: unit_data["name"],
					start: null,
					end: null,
					id: "unit" + unit,
					periods: []
				};

				// Determine task periods
				unit_available_data.forEach(function(period) {
					if (task.start === null) {
						task.start = period["start"];
						task.end = period["end"];
					}
					else {
						task.periods.push({
							start: period["start"],
							end: period["end"]
						})
					}
				});

				tasks.push(task);
				article_available_data.push(unit_available_data);
			}

			// Make GANTT
			/*new Gantt(".gantt-target-" + chars.charAt(i), tasks, {
				header_height: 50,
				column_width: 30,
				step: 24,
				view_modes: ['Quarter Day', 'Half Day', 'Day', 'Week', 'Month'],
				bar_height: 25,
				bar_corner_radius: 3,
				arrow_curve: 5,
				padding: 18,
				view_mode: 'Day',
				date_format: 'YYYY-MM-DD',
				custom_popup_html: null,
				gantt_start: '2019-01-01',
				gantt_end: '2019-12-31',
				bar_text_align: 'left'
			});*/
			articles_available_data.push(article_available_data);
		}

		const rental_start = new Date(2020, 9, 22);
		const rental_end = new Date(2020, 10, 21);

		let all_lanes = merge_article_availability(articles_available_data).filter(function(periods) {
			return contains_period(periods, rental_start, rental_end);
		});

		// Build tasks for lanes to display
	const menge_t = {
		start: "2020-09-20",
		end: "2020-09-20",
		name: "35",
		fill: 'white',
		disabled: true,
		css_class: "bulk_article",
		periods: []
	};
		const tasks = [
			{
				header: true,
				name: "Objektkoffer AII Zeiss 52/2 (Bestand 3)",
				disabled: true
			},
			{
				start: "2020-09-23",
				end: "2020-10-02",
				name: "How to attract a crane (23.09. - 02.10)",
				fill: "green"
			},
			{
				start: "2021-01-21",
				end: "2021-01-01"
			},
			{
				start: "2021-01-21",
				end: "2021-01-01"
			},
			{
				header: true,
				name: "Objektivkoffer Cooke S4/IT2" ,
				disabled: true
			},
			{
				start: "2021-01-21",
				end: "2021-01-01"
			},
			{
				start: "2020-09-25",
				end: "2020-10-06",
				name: "F2 'Der Tag' (25.09. - 06.10)",
				fill: "lightgreen"
			},
			{
				header: true,
				name: "Irgendein Mengenartikel (Bestand 35)" ,
				disabled: true
			},
			menge_t,
			{
				start: "2020-09-27",
				end: "2020-09-29",
				name: "F2 'Die Sonne'",
				fill: "yellow"
			},
			{
				start: "2020-09-27",
				end: "2020-09-29",
				name: "F2 'Die Sonne'",
				fill: "yellow"
			},
		];

		let d = parse('2020-09-20');
		const end = parse('2020-11-21');
		while (d <= end) {
			menge_t['periods'].push(
					{
						start: d,
						end: d,
						name: "35",
						fill: 'white',
						disabled: true
					},
			);

			d = add(d, 1, 'day');
		}


		/*all_lanes.forEach((lane, index) => {
			const task = {
				start: lane[0]["start"],
				end: lane[0]["end"],
				name: "<a href='https://google.de'>AAAAAA</a>",
				periods: (lane.length > 1) ? [] : null
			};

			for (let i = 1; i < lane.length; i++) {
				task.periods.push({
					start: lane[i]["start"],
					end: lane[i]["end"]
				});
			}

			tasks.push(task);
		});*/

		var gantt_chart = new Gantt(".gantt-target", tasks, {
			header_height: 50,
			column_width: 30,
			step: 24,
			view_modes: ['Quarter Day', 'Half Day', 'Day', 'Week', 'Month'],
			bar_height: 25,
			bar_corner_radius: 0,
			arrow_curve: 5,
			padding: 6,
			view_mode: 'Day',
			highlight_weekend: true,
			date_format: 'YYYY-MM-DD',
			custom_popup_html: null,
			gantt_start: '2020-09-20',
			gantt_end: '2020-11-21',
			bar_text_align: 'left',
		});


		/*const num_articles = 5;
		const min_reserviations = 10;
		const max_reserviations = 20;
		const min_duration = 1;
		const max_duration = 14;
		const articles = [];
		for (let i = 0; i < num_articles; i++) {
			const num_article_units = Math.ceil(Math.random() * 10);
			const units = [];

			for (let j = 0; j < num_article_units; j++) {
				let day = 0;
				const name = "Unit " + (j+1);

				// Determine random reservation timespan
				const reservations = [];
				const num_reservations = min_reserviations + Math.ceil(Math.random() * (max_reserviations - min_reserviations));
				const o = (365.0 - (((max_duration - min_duration) / 2) * num_reservations)) / num_reservations;
				for (let k = 0; k < num_reservations && day < 365; k++) {
					const start_day = day + Math.ceil(Math.random() * o);
					const end_day = Math.min(365, start_day + Math.ceil(Math.random() * (max_duration - min_duration)));

					console.log(name, start_day, end_day);
					day = end_day;

					reservations.push({
						start: new Date(2019, 0, 1 + start_day),
						end: new Date(2019, 0, 1 + end_day)
					});
				}

				units.push({
					name: name,
					reservations: reservations
				})
			}

			articles.push(units);
		}

		console.log(JSON.stringify(articles));*/






	function parse(date, date_separator = '-', time_separator = /[.:]/) {
		if (date instanceof Date) {
			return date;
		}
		if (typeof date === 'string') {
			let date_parts, time_parts;
			const parts = date.split(' ');

			date_parts = parts[0]
					.split(date_separator)
					.map(val => parseInt(val, 10));
			time_parts = parts[1] && parts[1].split(time_separator);

			// month is 0 indexed
			date_parts[1] = date_parts[1] - 1;

			let vals = date_parts;

			if (time_parts && time_parts.length) {
				if (time_parts.length == 4) {
					time_parts[3] = '0.' + time_parts[3];
					time_parts[3] = parseFloat(time_parts[3]) * 1000;
				}
				vals = vals.concat(time_parts);
			}

			return new Date(...vals);
		}
	}

	function to_string(date, with_time = false) {
		if (!(date instanceof Date)) {
			throw new TypeError('Invalid argument type');
		}
		const vals = this.get_date_values(date).map((val, i) => {
			if (i === 1) {
				// add 1 for month
				val = val + 1;
			}

			if (i === 6) {
				return padStart(val + '', 3, '0');
			}

			return padStart(val + '', 2, '0');
		});
		const date_string = `${vals[0]}-${vals[1]}-${vals[2]}`;
		const time_string = `${vals[3]}:${vals[4]}:${vals[5]}.${vals[6]}`;

		return date_string + (with_time ? ' ' + time_string : '');
	}

	function format(date, format_string = 'YYYY-MM-DD HH:mm:ss.SSS', lang = 'en') {
		const values = this.get_date_values(date).map(d => padStart(d, 2, 0));
		const format_map = {
			YYYY: values[0],
			MM: padStart(+values[1] + 1, 2, 0),
			DD: values[2],
			HH: values[3],
			mm: values[4],
			ss: values[5],
			SSS:values[6],
			D: values[2],
			MMMM: month_names[lang][+values[1]],
			MMM: month_names[lang][+values[1]]
		};

		let str = format_string;
		const formatted_values = [];

		Object.keys(format_map)
				.sort((a, b) => b.length - a.length) // big string first
				.forEach(key => {
					if (str.includes(key)) {
						str = str.replace(key, `$${formatted_values.length}`);
						formatted_values.push(format_map[key]);
					}
				});

		formatted_values.forEach((value, i) => {
			str = str.replace(`$${i}`, value);
		});

		return str;
	}

	function diff(date_a, date_b, scale = DAY) {
		let milliseconds, seconds, hours, minutes, days, months, years;

		milliseconds = date_a - date_b;
		seconds = milliseconds / 1000;
		minutes = seconds / 60;
		hours = minutes / 60;
		days = hours / 24;
		months = days / 30;
		years = months / 12;

		if (!scale.endsWith('s')) {
			scale += 's';
		}

		return Math.floor(
				{
					milliseconds,
					seconds,
					minutes,
					hours,
					days,
					months,
					years
				}[scale]
		);
	}

	function today() {
		const vals = this.get_date_values(new Date()).slice(0, 3);
		return new Date(...vals);
	}

	function now() {
		return new Date();
	}

	function add(date, qty, scale) {
		qty = parseInt(qty, 10);
		const vals = [
			date.getFullYear() + (scale === YEAR ? qty : 0),
			date.getMonth() + (scale === MONTH ? qty : 0),
			date.getDate() + (scale === DAY ? qty : 0),
			date.getHours() + (scale === HOUR ? qty : 0),
			date.getMinutes() + (scale === MINUTE ? qty : 0),
			date.getSeconds() + (scale === SECOND ? qty : 0),
			date.getMilliseconds() + (scale === MILLISECOND ? qty : 0)
		];
		return new Date(...vals);
	}

	function start_of(date, scale) {
		const scores = {
			[YEAR]: 6,
			[MONTH]: 5,
			[DAY]: 4,
			[HOUR]: 3,
			[MINUTE]: 2,
			[SECOND]: 1,
			[MILLISECOND]: 0
		};

		function should_reset(_scale) {
			const max_score = scores[scale];
			return scores[_scale] <= max_score;
		}

		const vals = [
			date.getFullYear(),
			should_reset(YEAR) ? 0 : date.getMonth(),
			should_reset(MONTH) ? 1 : date.getDate(),
			should_reset(DAY) ? 0 : date.getHours(),
			should_reset(HOUR) ? 0 : date.getMinutes(),
			should_reset(MINUTE) ? 0 : date.getSeconds(),
			should_reset(SECOND) ? 0 : date.getMilliseconds()
		];

		return new Date(...vals);
	}

	function clone(date) {
		return new Date(...this.get_date_values(date));
	}

	function get_date_values(date) {
		return [
			date.getFullYear(),
			date.getMonth(),
			date.getDate(),
			date.getHours(),
			date.getMinutes(),
			date.getSeconds(),
			date.getMilliseconds()
		];
	}

	function get_days_in_month(date) {
		const no_of_days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

		const month = date.getMonth();

		if (month !== 1) {
			return no_of_days[month];
		}

		// Feb
		const year = date.getFullYear();
		if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) {
			return 29;
		}
		return 28;
	}
	</script>
</body>
</html>
